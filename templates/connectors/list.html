{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2 class="mt-4">–°–ø–∏—Å–æ–∫ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤</h2>
    <a href="{{ url_for('connectors.add_connector') }}" class="btn btn-primary mb-3">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä</a>

    <div class="row">
        <!-- –ë–ª–æ–∫ "–ß—Ç–µ–Ω–∏–µ" -->
        <div class="col-md-6">
            <h3 class="mt-4">üìñ –ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã "–ß—Ç–µ–Ω–∏–µ"</h3>
            <ul class="list-group">
                {% if reading_connectors %}
                    {% for connector in reading_connectors %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>{{ connector.name }}</strong>
                                <span class="badge bg-info">{{ connector.service }}</span>
                            </div>
                        </li>
                    {% endfor %}
                {% else %}
                    <li class="list-group-item text-muted">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤</li>
                {% endif %}
            </ul>
        </div>

        <!-- –ë–ª–æ–∫ "–ó–∞–ø–∏—Å—å" -->
        <div class="col-md-6">
            <h3 class="mt-4">‚úçÔ∏è –ö–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã "–ó–∞–ø–∏—Å—å"</h3>
            <ul class="list-group">
                {% if writing_connectors %}
                    {% for connector in writing_connectors %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>{{ connector.name }}</strong>
                                <span class="badge bg-success">{{ connector.service }}</span>
                            </div>
                        </li>
                    {% endfor %}
                {% else %}
                    <li class="list-group-item text-muted">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–æ–≤</li>
                {% endif %}
            </ul>
        </div>
    </div>

    <!-- –ë–ª–æ–∫ —Å –æ—Ç—á—ë—Ç–∞–º–∏ -->
    <div class="mt-5">
        <h3>üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ç—á—ë—Ç—ã</h3>
        <ul class="list-group">
            {% if reports %}
                {% for report in reports %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <strong>{{ report.name }}</strong>
                            <span class="badge bg-secondary">{{ report.date or "–î–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞" }}</span>
                        </div>
                        <div class="d-flex gap-2">
                            <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ –æ—Ç—á—ë—Ç–∞ -->
                            <form method="POST" action="{{ url_for('reports.run_report', client_login=report.client, report_name=report.name) }}">
                                <button type="submit" class="btn btn-success btn-sm">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                            </form>
                            <a href="{{ url_for('reports.report_queue') }}" class="btn btn-secondary btn-sm">üìú –û—á–µ—Ä–µ–¥—å</a>
                            <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –æ—Ç—á—ë—Ç–∞ -->
                            <a href="{{ url_for('reports.edit_report', client_login=report['client'], report_name=report['name']) }}">
                                üìÇ –û—Ç–∫—Ä—ã—Ç—å</a>
                        </div>
                    </li>
                {% endfor %}
            {% else %}
                <li class="list-group-item text-muted">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤</li>
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}
