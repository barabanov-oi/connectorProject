
{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2 class="mt-4">üìä –û—á–µ—Ä–µ–¥—å –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤</h2>
    <table class="table mt-3">
        <thead>
            <tr>
                <th>–û—Ç—á—ë—Ç</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–ù–∞—á–∞–ª–æ</th>
                <th>–û–∫–æ–Ω—á–∞–Ω–∏–µ</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫</th>
                <th>–ü–µ—Ä–∏–æ–¥</th>
                <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
            </tr>
        </thead>
        <tbody>
            {% for report in queue %}
            {% if report.user_id == current_user.id %}
            <tr>
                <td>{{ report.report }}</td>
                <td>
                    {% if report.status == "–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è" %}
                        <span class="badge bg-warning">‚åõ {{ report.status }}</span>
                    {% elif report.status.startswith("–û—à–∏–±–∫–∞") %}
                        <span class="badge bg-danger text-wrap" style="white-space: normal;">‚ùå {{ report.status }}</span>
                    {% else %}
                        <span class="badge bg-success">‚úÖ {{ report.status }}</span>
                    {% endif %}
                </td>
                <td>{{ report.start_time|datetimeformat }}</td>
                <td>{{ report.end_time|datetimeformat if report.end_time else "‚Äî" }}</td>
                <td>{{ report.rows_count }}</td>
                <td>{{ report.period|periodformat if report.period else "‚Äî" }}</td>
                <td>
                    {% if report.result_link and report.result_link != "-" %}
                        <a href="{{ report.result_link }}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å</a>
                    {% else %}
                        ‚Äî
                    {% endif %}
                </td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
